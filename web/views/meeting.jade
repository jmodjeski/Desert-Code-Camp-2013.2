extends layout

block head

	link(rel="import", href="/elements/framework-clock.html")
	link(rel="import", href="/elements/framework-highchart.html")
	link(rel="import", href="/elements/framework-resource.html")

block content
	h1 Meeting #{id}

	polymer-element(name="meeting-log-resource", extends="framework-resource")
		script.
			Polymer("meeting-log-resource",{
				url: '/api/meetingslog',
			})

	polymer-element(name="meeting-log-list")
		script.
			Polymer("meeting-log-list", {
				created: function(){


				}
			});

	// using lightdom here so this element is inserted into
	// the actual dom instead of a shadow root.
	polymer-element(name="meeting-detail-app", lightdom)
		template
			meeting-log-resource(id="resource")
			.row
				.col-md-4.col-md-offset-1
					framework-clock(id="start")
				.col-md-4.col-md-offset-2
					framework-clock(id="stop", run="true")

			.row
				.col-md-10.col-md-offset-1
					framework-highchart(id="chart")
			.row
				.col-md-10.col-md-offset-1
					meeting-log-list(id="list")
		script.
			Polymer("meeting-detail-app", {
				publish: {
					meetingId: ''
				},

				created:function(){
					var self = this;
					self.initialize();
				},

				meetingIdChanged: function(){
					var self = this;
					self.initialize();
				},

				initialize: function(){
					var self = this;

					self.$.resource.query({meeting_id: self.meetingId});
				}
			})

	meeting-detail-app(meetingid="#{id}")
