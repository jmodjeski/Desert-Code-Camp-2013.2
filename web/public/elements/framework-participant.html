<polymer-element
	name="framework-participant"
	attributes="edit participant"
	>
	<script>
		Polymer('framework-participant', {
			url: '/api/participants',
			created: function () {
				this.participant = {
					type: 'participant name',
					cost: 0.0,
					count: 0
				};
				this.edit = false;
			},
			parse: function (data) {
				return _.defaults({
					participant: this.participant
				}, data);
			},
			toggle: function (e) {
				this.edit = !this.edit;
			},
			killPropagation: function(e) {
				e.stopPropagation();
			},
			save: function(e) {
				e.stopPropagation();
				alert('saving');
				this.toggle(e);
			},
			editChanged: function (oldVal) {
			}
		});
	</script>
	<template>
		<style>
			.wrapper {
				padding: 24px;
				opacity: 30%;
				background-color: #ccc;
			}
		</style>
		<div class="wrapper" on-click="toggle">
			<template if="{{!edit}}">
				<span class="span2">{{participant.type}}</span>
				<span class="span1">{{participant.cost}}</span>
				<span class="span1">{{participant.count}}</span>
			</template>
			<template if="{{edit}}">
				<span class="span2">
					<input 
						placeholder="{{participant.type}}" 
						value="{{participant.type}}" 
						on-click="killPropagation"
					/>
				</span>
				<span class="span1">
					<input 
						placeholder="{{participant.cost}}"
						value="{{particitpant.cost}}"
						on-click="killPropagation"
					/>
				</span>
				<span class="span1">
					<input 
						type="number"
						placeholder="{{participant.count}}"
						value="{{participant.count}}"
						on-click="killPropagation"
					/>
			</span>
			<span>
				<button class="btn btn-primary" on-click="save">Save</button>
				<button class="btn">Cancel</button>
			</span>
		</template>
		</div>
	</template>
</polymer-element>